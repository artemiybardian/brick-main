<div class="category-item level-{{ level }}">
    <div class="d-flex align-items-center">
        {% if category.high_links.exists %}
            <button class="btn btn-link btn-sm p-0 me-2 toggle-subcategories" type="button" 
                    data-bs-toggle="collapse" data-bs-target="#category-{{ category.id }}" 
                    aria-expanded="true">
                <i class="fas fa-chevron-down"></i>
            </button>
        {% else %}
            <span class="me-4"></span>
        {% endif %}
        <a href="{% url 'category_detail' category.id %}" class="category-name">
            {{ category.collection_name }}
            <span class="category-count">({{ category.get_total_objects_count }})</span>
        </a>
    </div>
    
    {% with subcategories=category.high_links.all %}
        {% if subcategories %}
            <div class="collapse show" id="category-{{ category.id }}">
                <div class="subcategories">
                    {% for link in subcategories %}
                        {% with category=link.low level=level|add:2 %}
                            {% include 'front/_category_tree.html' %}
                        {% endwith %}
                    {% endfor %}
                </div>
            </div>
        {% endif %}
    {% endwith %}
</div>